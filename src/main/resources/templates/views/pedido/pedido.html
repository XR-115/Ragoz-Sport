<!DOCTYPE html>
<html xlmns:th="https://www.thymeleaf.org" class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
  <title>Ver pedidos</title>
  <th:block th:include="views/header::head"> </th:block>
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu-modern  navbar-floating footer-static  " data-open="click"
  data-menu="vertical-menu-modern" data-col="">

  <!-- BEGIN: Header-->
  <nav th:include="views/Nav::nav"
    class="header-navbar navbar navbar-expand-lg align-items-center floating-nav navbar-light navbar-shadow container-xxl">
  </nav>


  <!-- END: Header-->


  <!-- MENÚ DASHBOARD INCLUDE-->
  <div th:include="views/menuDashboard::menuDash" class="main-menu menu-fixed menu-light menu-accordion menu-shadow"
    data-scroll-to-active="true">
  </div>
  <!-- BEGIN: Content-->
  <div class="app-content content ">
    <div class="content-overlay"></div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper container-xxl p-0">
      <div class="content-header row">
      </div>
      <div class="content-body">
        <!-- users list start -->
        <section class="app-user-list">
          <div class="row">

          </div>
      </div>
      <!-- list and filter start -->
      <div class="card">
        <div class="container">
          <div class="row">
            <div class="col">
              <table id="example" class="table table-striped display responsive nowrap">
                <thead class="bg bg-info">
                  <tr>
                    <th>Id</th>
                    <th>Número de la guía</th>
                    <th>Cantidad total de pares</th>
                    <th>Referencias del producto</th>
                    <th>ACCIONES</th>
                  </tr>
                </thead>
                <tbody class="bg bg-white text-light">

                  <tr th:if="${pedido.size>0}" th:each="pe:${pedido}">

                    <td class="text-dark" th:text="${pe.idPedido}"></td>
                    <td class="text-dark" th:text="${pe.fkguia.idGuia}"></td>
                    <td class="text-dark" th:text="${pe.cantidadTotalPed}"></td>
                    <!-- <td  class="text-dark" th:text="${pe.fkproducto.referenciaProd}"></td> -->
                    <td>
                      <!-- Button trigger modal -->
                      <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal"
                        th:attr="data-bs-target='#exampleModal'+${pe.idPedido}">
                        <i class="fa-solid fa-eye"></i>
                      </button>

                      <div class="modal fade text-start" tabindex="-1" aria-labelledby="myModalLabel18"
                        aria-hidden="true" th:id="exampleModal+${pe.idPedido}">
                        <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h4 class="modal-title" id="myModalLabel18">Productos asociados</h4>
                              <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <table id="example" class="table table-striped display responsive nowrap">
                                <thead class="bg bg-info">
                                  <tr>
                                    <th>Id</th>
                                    <th>Total</th>
                                    <th>Categoria</th>
                                    <th>Referencia</th>
                                  </tr>
                                </thead>
                                <tbody class="bg bg-white text-light">
                                  <tr th:if="${pedido.size>0}">
                                    <td class="text-dark" th:text="${pe.idPedido}"></td>
                                    <td>
                                      <p class="text-dark" th:each="fk:${pe.producto}" th:text="${fk.totalProd}">
                                      </p>
                                    </td>
                                    <td>
                                      <p class="text-dark" th:each="fk:${pe.producto}" th:text="${fk.categoriaProd}">
                                      </p>
                                    </td>
                                    <td>
                                      <p class="text-dark" th:each="fk:${pe.producto}" th:text="${fk.referenciaProd}">
                                      </p>
                                    </td>
                                  </tr>
                                </tbody>

                              </table>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Accept</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      

                    </td>

                    <td>
                      <a rol="button" class="btn btn-info" th:href="@{/pedido/editar/}+${pe.idPedido}">
                        <i class="fa-solid fa-pen"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>

              </table>

              <div class="card">
                <div class="col">
                  <a type="button" class="btn btn-info" th:href="@{abrirForm}">
                    <i class="bi bi-plus-circle"></i>Agregar Pedido
                  </a>
                </div>
              </div>



            </div>
          </div>
        </div>
        <!-- list and filter end -->
        </section>
        <!-- users list ends -->


        <!-- Modal -->


      </div>
    </div>
  </div>

  <!-- END: Content-->

  <!-- BEGIN: Footer-->
  <footer th:include="views/Footer::footer" class="footer footer-static footer-light">
  </footer>
  <button class="btn btn-primary btn-icon scroll-top" type="button"><i data-feather="arrow-up"></i></button>
  <!-- END: Footer-->

  <script th:src="@{/js/main-alerts.js}"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

  <div class="scripts" th:include="views/header::script"></div>

</body>
<!-- END: Body-->

</html>